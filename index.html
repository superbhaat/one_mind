<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Meditation | One Mind</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        }
                    }
                }
            }
        }
    </script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-8">Create Your Meditation</h1>
        
        <form id="meditationForm" class="space-y-12">
            <!-- Duration Selection Section -->
            <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Select Meditation Length</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3" id="durationGrid">
                    <!-- Duration buttons will be generated by JavaScript -->
                </div>
            </section>
            
            <!-- Title Input Section -->
            <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Meditation Title</h2>
                <div class="space-y-2">
                    <input type="text" id="meditationTitle" placeholder="Enter a draft title for your meditation" 
                        class="w-full bg-gray-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500">
                    <p class="text-sm text-gray-400 italic">AI will suggest 3 alternative titles after creation</p>
                </div>
            </section>
            
            <!-- Theme Description Section -->
            <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Meditation Theme</h2>
                <div class="space-y-2">
                    <textarea id="themeDescription" rows="4" placeholder="Describe the theme and focus of your meditation (e.g., stress relief, gratitude, sleep preparation...)" 
                        class="w-full bg-gray-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                        maxlength="500"></textarea>
                    <div class="flex justify-end">
                        <span id="themeCounter" class="text-sm text-gray-400">0/500</span>
                    </div>
                </div>
            </section>
            
            <!-- Visual Theme Section -->
            <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-semibold">Visual Theme</h2>
                    <button type="button" id="generateVisualBtn" class="text-primary-400 hover:text-primary-300 transition-colors p-2 rounded-full hover:bg-gray-700" title="Generate with AI">
                        <i class="fas fa-wand-magic-sparkles text-xl"></i>
                    </button>
                </div>
                <div class="space-y-2">
                    <textarea id="visualTheme" rows="4" placeholder="Describe the visual atmosphere (colors, imagery, mood...)" 
                        class="w-full bg-gray-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                        maxlength="500"></textarea>
                    <div class="flex justify-end">
                        <span id="visualCounter" class="text-sm text-gray-400">0/500</span>
                    </div>
                </div>
            </section>
            
            <!-- Music Selection Section -->
            <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Select Background Music</h2>
                
                <!-- Search and Filter -->
                <div class="mb-6 space-y-4">
                    <div class="relative">
                        <input type="text" placeholder="Search tracks..." 
                            class="w-full bg-gray-700 text-white pl-10 pr-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    
                    <div class="flex flex-wrap gap-2">
                        <button type="button" class="px-4 py-2 rounded-full bg-primary-600 text-white font-medium">All</button>
                        <button type="button" class="px-4 py-2 rounded-full bg-gray-700 text-white font-medium hover:bg-gray-600 transition-colors">Ambient</button>
                        <button type="button" class="px-4 py-2 rounded-full bg-gray-700 text-white font-medium hover:bg-gray-600 transition-colors">Nature</button>
                        <button type="button" class="px-4 py-2 rounded-full bg-gray-700 text-white font-medium hover:bg-gray-600 transition-colors">Instrumental</button>
                        <button type="button" class="px-4 py-2 rounded-full bg-gray-700 text-white font-medium hover:bg-gray-600 transition-colors">Binaural</button>
                    </div>
                </div>
                
                <!-- Music Tracks -->
                <div class="space-y-4" id="musicTracks">
                    <!-- Track items will be generated by JavaScript -->
                </div>
            </section>
            
            <!-- Submit Button -->
            <div class="flex justify-center">
                <button type="submit" id="submitBtn" class="bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg transition-colors transform hover:scale-105 active:scale-95">
                    Create Meditation
                </button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Generate duration buttons
            const durationGrid = document.getElementById('durationGrid');
            const durations = [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60];
            let selectedDuration = null;
            
            durations.forEach(duration => {
                const button = document.createElement('button');
                button.type = 'button';
                button.className = 'duration-btn bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-full transition-colors';
                button.dataset.duration = duration;
                button.textContent = `${duration} min`;
                
                button.addEventListener('click', function() {
                    // Remove selected class from all buttons
                    document.querySelectorAll('.duration-btn').forEach(btn => {
                        btn.classList.remove('bg-primary-600');
                        btn.classList.add('bg-gray-700');
                    });
                    
                    // Add selected class to this button
                    this.classList.remove('bg-gray-700');
                    this.classList.add('bg-primary-600');
                    
                    // Update selected duration
                    selectedDuration = duration;
                });
                
                durationGrid.appendChild(button);
            });
            
            // Character counters for textareas
            const themeTextarea = document.getElementById('themeDescription');
            const visualTextarea = document.getElementById('visualTheme');
            const themeCounter = document.getElementById('themeCounter');
            const visualCounter = document.getElementById('visualCounter');
            
            function updateCounter(textarea, counter) {
                const currentLength = textarea.value.length;
                const maxLength = textarea.getAttribute('maxlength');
                counter.textContent = `${currentLength}/${maxLength}`;
            }
            
            themeTextarea.addEventListener('input', () => updateCounter(themeTextarea, themeCounter));
            visualTextarea.addEventListener('input', () => updateCounter(visualTextarea, visualCounter));
            
            // Generate music tracks
            const musicTracks = document.getElementById('musicTracks');
            const trackData = [
                { id: 1, title: 'Peaceful Ambience', artist: 'Serenity', duration: '4:32' },
                { id: 2, title: 'Ocean Waves', artist: 'Nature Sounds', duration: '5:16' },
                { id: 3, title: 'Forest Morning', artist: 'Woodland', duration: '3:45' },
                { id: 4, title: 'Deep Meditation', artist: 'Zen Master', duration: '6:20' },
                { id: 5, title: 'Theta Waves', artist: 'Binaural Beats', duration: '8:15' }
            ];
            
            trackData.forEach(track => {
                // Create track item
                const trackItem = document.createElement('div');
                trackItem.className = 'flex items-center bg-gray-700 rounded-lg p-3 hover:bg-gray-600 transition-colors';
                trackItem.innerHTML = `
                    <button class="play-btn w-10 h-10 flex items-center justify-center rounded-full bg-primary-600 hover:bg-primary-500 mr-4 transition-colors" data-id="${track.id}">
                        <i class="fas fa-play"></i>
                    </button>
                    
                    <div class="flex-1 min-w-0">
                        <div class="font-medium">${track.title}</div>
                        <div class="text-sm text-gray-400">${track.artist}</div>
                    </div>
                    
                    <div class="hidden sm:block flex-1 px-4">
                        <!-- Simple CSS waveform -->
                        <div class="h-6 flex items-center">
                            ${generateWaveform()}
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-400 mr-4">${track.duration}</div>
                    
                    <button class="add-track-btn p-2 rounded-full hover:bg-gray-500 transition-colors" data-id="${track.id}">
                        <i class="fas fa-plus"></i>
                    </button>
                `;
                
                musicTracks.appendChild(trackItem);
            });
            
            // Handle play button clicks
            document.querySelectorAll('.play-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const isPlaying = this.classList.contains('playing');
                    
                    // Reset all play buttons
                    document.querySelectorAll('.play-btn').forEach(playBtn => {
                        playBtn.classList.remove('playing');
                        playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    });
                    
                    // If wasn't playing, set to playing
                    if (!isPlaying) {
                        this.classList.add('playing');
                        this.innerHTML = '<i class="fas fa-pause"></i>';
                    }
                });
            });
            
            // Generate waveform
            function generateWaveform() {
                let waveformHtml = '';
                const bars = 30;
                
                for (let i = 0; i < bars; i++) {
                    const height = Math.floor(Math.random() * 100) + 20;
                    waveformHtml += `<div class="w-1 mx-0.5 bg-gray-500" style="height: ${height}%"></div>`;
                }
                
                return `<div class="flex items-center w-full h-full">${waveformHtml}</div>`;
            }
            
            // Generate with AI button
            document.getElementById('generateVisualBtn').addEventListener('click', function() {
                const themeText = document.getElementById('themeDescription').value;
                
                // In a real app, this would call an AI API
                // For demo, just simulate with a timeout
                this.innerHTML = '<i class="fas fa-spinner fa-spin text-xl"></i>';
                this.disabled = true;
                
                setTimeout(() => {
                    const aiSuggestion = "A serene mountain landscape at dawn with soft purple and blue hues. The sky transitions from deep indigo to light lavender as the sun rises, creating a peaceful atmosphere. Gentle mist hovers over verdant valleys, while distant peaks are silhouetted against the brightening sky.";
                    document.getElementById('visualTheme').value = aiSuggestion;
                    updateCounter(visualTextarea, visualCounter);
                    
                    this.innerHTML = '<i class="fas fa-wand-magic-sparkles text-xl"></i>';
                    this.disabled = false;
                }, 1500);
            });
            
            // Form validation
            document.getElementById('meditationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                let isValid = true;
                let errorMessage = '';
                
                // Check if duration is selected
                if (selectedDuration === null) {
                    isValid = false;
                    errorMessage += 'Please select a meditation duration. ';
                }
                
                // Check if title is entered
                const title = document.getElementById('meditationTitle').value.trim();
                if (title === '') {
                    isValid = false;
                    errorMessage += 'Please enter a meditation title. ';
                }
                
                // Check if theme is entered
                const theme = document.getElementById('themeDescription').value.trim();
                if (theme === '') {
                    isValid = false;
                    errorMessage += 'Please describe the meditation theme. ';
                }
                
                if (isValid) {
                    // Form is valid, would submit in a real app
                    alert('Meditation created successfully!');
                    // In a real app, this would submit the form or call an API
                } else {
                    // Show error
                    alert(errorMessage);
                }
            });
        });
    </script>
</body>
</html>